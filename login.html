<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nasir Login System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- ===========================
     GLASSMORPHISM MODERN UI (FINAL)
     - Full single-file implementation
     - All firebase logic preserved
     - Error messages shown inline under password (no alert popups)
     - Eye button has a small clickable area only
     - CSS intentionally long and detailed
   =========================== -->
<style>
:root{
  --bg-1: #071019;
  --glass-1: rgba(255,255,255,0.04);
  --glass-2: rgba(255,255,255,0.06);
  --accent: #00e6ff;
  --muted: rgba(255,255,255,0.6);
  --text: #eaf6ff;
  --success: #7ef1b2;
  --danger: #ff6b6b;
  --shadow: 0 8px 30px rgba(2,6,23,0.6);
  --radius: 16px;
  --glass-border: rgba(255,255,255,0.06);
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:
    radial-gradient(1200px 600px at 10% 20%, rgba(0,40,60,0.35), transparent 8%),
    radial-gradient(900px 400px at 90% 80%, rgba(0,20,40,0.28), transparent 10%),
    linear-gradient(180deg, var(--bg-1) 0%, #05060a 100%);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  overflow:hidden;
  padding:32px;
}

/* Background shapes */
.bg-shape { position: absolute; filter: blur(60px) saturate(120%); opacity:0.25; pointer-events:none; mix-blend-mode:screen; }
.bg-shape.s1{ width:620px; height:620px; left:-100px; top:-160px; background:linear-gradient(135deg, rgba(0,230,255,0.14), rgba(120,48,255,0.08)); transform:rotate(12deg); }
.bg-shape.s2{ width:520px; height:420px; right:-80px; bottom:-120px; background:linear-gradient(180deg, rgba(0,230,255,0.08), rgba(255,255,255,0.02)); transform:rotate(-20deg); }

/* big decorative glass panel */
.decor{ position:absolute; left:50%; transform:translateX(-50%); top:8%; width:80%; max-width:1200px; height:320px; border-radius:28px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008)); box-shadow:0 30px 120px rgba(2,6,23,0.5); border:1px solid rgba(255,255,255,0.02); z-index:1; pointer-events:none; opacity:0.06; }

/* container */
.container {
  position: relative;
  z-index: 5;
  width: 420px;
  max-width: calc(100% - 48px);
  border-radius: calc(var(--radius) + 6px);
  padding: 36px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px) saturate(140%);
  -webkit-backdrop-filter: blur(14px) saturate(140%);
  display:flex;
  flex-direction:column;
  gap:18px;
  transition: transform 0.45s cubic-bezier(.2,.9,.3,1), box-shadow 0.35s;
}
.container:hover{ transform: translateY(-6px); box-shadow: 0 18px 60px rgba(2,6,23,0.75); }

/* brand */
.brand { display:flex; align-items:center; gap:14px; }
.logo { width:56px; height:56px; border-radius:12px; background:linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.06); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:18px; color:var(--accent); box-shadow: inset 0 -6px 20px rgba(0,0,0,0.45), 0 6px 24px rgba(0,0,0,0.45); backdrop-filter: blur(6px); }
.brand h2 { font-size:18px; font-weight:700; letter-spacing:0.4px; color:var(--text); }
.brand p { font-size:13px; color:var(--muted); margin-top:3px; }

/* form */
.form { margin-top:6px; display:grid; gap:12px; }
.field { position:relative; display:flex; flex-direction:column; gap:8px; }
.label { font-size:13px; color:var(--muted); display:flex; justify-content:space-between; align-items:center; }

/* input */
.input {
  position:relative;
  display:flex;
  align-items:center;
  background: linear-gradient(180deg, var(--glass-1), var(--glass-2));
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.04);
  padding:12px 14px;
  transition: box-shadow 0.22s, transform 0.18s, border-color 0.18s;
  box-shadow: 0 6px 20px rgba(2,6,23,0.45), inset 0 1px 0 rgba(255,255,255,0.02);
}
.input:focus-within{ box-shadow: 0 10px 36px rgba(0,230,255,0.06), 0 4px 18px rgba(2,6,23,0.5); border-color: rgba(0,230,255,0.12); transform: translateY(-1px); }
.input input[type="email"], .input input[type="password"]{ flex:1; background:transparent; border:none; outline:none; color:var(--text); font-size:15px; padding:6px 6px; }
.input input::placeholder{ color: rgba(255,255,255,0.42); font-weight:500; }

/* eye button and spacer */
.password-wrapper{ position:relative; width:100%; }
.eye-btn {
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  width:36px;
  height:36px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:10px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.04);
  cursor:pointer;
  transition: background 0.15s, transform 0.12s;
  z-index:10;
  font-size:15px;
  color:var(--muted);
  pointer-events:auto;
}
.eye-btn:active{ transform: translateY(-50%) scale(0.98) }
.eye-btn svg{ width:18px; height:18px; display:block; }
.input .eye-spacer { width:46px; flex-shrink:0; }

/* actions */
.actions { display:flex; flex-direction:column; gap:12px; margin-top:6px; }
.btn { display:inline-flex; align-items:center; justify-content:center; gap:10px; padding:12px 16px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(255,255,255,0.02)); color:var(--text); cursor:pointer; font-weight:600; letter-spacing:0.2px; transition: transform 0.15s, box-shadow 0.18s, background 0.18s; box-shadow: 0 6px 20px rgba(2,6,23,0.4); }
.btn.primary{ background: linear-gradient(90deg, rgba(0,230,255,0.08), rgba(120,48,255,0.03)); border: 1px solid rgba(0,230,255,0.12); color: var(--text); box-shadow: 0 10px 36px rgba(0,230,255,0.04), 0 6px 22px rgba(2,6,23,0.5); }
.btn:hover{ transform: translateY(-3px); box-shadow:0 18px 48px rgba(2,6,23,0.55) }
.btn.ghost{ background:transparent; border:1px dashed rgba(255,255,255,0.04); color:var(--muted); }

/* small links */
.row { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:6px; }
.small-link{ font-size:13px; color:var(--muted); cursor:pointer; text-decoration:underline; }

/* separator */
.sep { height:1px; width:100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.02), transparent); margin:6px 0; }

/* footer */
.footer { font-size:13px; color:var(--muted); text-align:center; margin-top:6px; }

/* success overlay */
.success-box {
  display:none;
  position:absolute;
  inset:0;
  border-radius:calc(var(--radius) + 6px);
  background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.46));
  border:1px solid rgba(0,255,255,0.06);
  backdrop-filter: blur(8px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  z-index:999;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:12px;
  color:var(--success);
  font-weight:700;
  font-size:18px;
  padding:24px;
  animation: successPop 0.45s cubic-bezier(.2,.9,.3,1);
}
@keyframes successPop { from { transform: translateY(8px) scale(0.98); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }
.success-icon{ display:inline-flex; align-items:center; justify-content:center; width:72px; height:72px; border-radius:20px; background:linear-gradient(180deg, rgba(126,241,178,0.08), rgba(126,241,178,0.03)); border:1px solid rgba(126,241,178,0.12); font-size:28px; color:var(--success); box-shadow: 0 10px 30px rgba(126,241,178,0.03); }

/* Inline error/message area (below password) */
.error-message {
    margin-top: 8px;
    font-size: 14px;
    color: var(--danger);
    min-height: 20px;
    opacity: 0;
    transition: opacity 0.28s ease, transform 0.28s ease;
    text-align: left;
    padding-left: 5px;
    transform: translateY(-4px);
    pointer-events: none;
}
.error-message.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}
/* info style (for non-error messages e.g., reset link sent) */
.info-message {
    margin-top: 8px;
    font-size: 14px;
    color: var(--accent);
    min-height: 20px;
    opacity: 0;
    transition: opacity 0.28s ease, transform 0.28s ease;
    text-align: left;
    padding-left: 5px;
    transform: translateY(-4px);
    pointer-events: none;
}
.info-message.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

/* accessibility */
.input input:focus { outline: none; }
.btn:focus, .eye-btn:focus { box-shadow: 0 0 0 4px rgba(0,230,255,0.06); outline: none }

/* avatar & extra helpers */
.avatar { width:86px; height:86px; border-radius:16px; margin:0 auto 6px auto; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); box-shadow: 0 6px 22px rgba(0,0,0,0.45); }
.avatar svg{ width:44px; height:44px; color:var(--accent); }
.tip { margin-top:6px; padding:12px; border-radius:10px; font-size:13px; color:rgba(255,255,255,0.7); background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008)); border:1px dashed rgba(255,255,255,0.02); }

/* responsive */
@media (max-width:520px){ .container{ padding:20px; width:100%; max-width:420px } .logo{ width:48px; height:48px; font-size:16px } .brand h2{ font-size:16px } .eye-btn{ width:34px; height:34px } }
@media (min-width:1100px){ .container{ width:520px; padding:46px; border-radius:20px } .logo{ width:68px; height:68px; font-size:21px } .brand h2{ font-size:20px } }

/* utility classes & micro tweaks to extend CSS */
.h-4{height:4px}.h-6{height:6px}.h-8{height:8px}.w-4{width:4px}.w-6{width:6px}
.mt-2{margin-top:8px}.mt-3{margin-top:12px}.mt-4{margin-top:16px}.mb-2{margin-bottom:8px}
.p-2{padding:8px}.p-3{padding:12px}.p-4{padding:16px}
.container * { user-select: none; -webkit-user-select:none; -moz-user-select:none }
.input input { user-select:text; -webkit-user-select:text }
</style>
</head>

<body>

<!-- Background decorative shapes -->
<div class="bg-shape s1" aria-hidden="true"></div>
<div class="bg-shape s2" aria-hidden="true"></div>
<div class="decor" aria-hidden="true"></div>

<!-- MAIN GLASS CONTAINER -->
<div class="container" role="main" aria-labelledby="brandTitle">

  <div class="brand">
    <div class="logo" aria-hidden="true">NH</div>
    <div>
      <h2 id="brandTitle">üîê Nasir Login</h2>
      <p>Secure access ‚Ä¢ Glassmorphism UI</p>
    </div>
  </div>

  <!-- success overlay -->
  <div class="success-box" id="successBox" aria-live="polite" aria-hidden="true">
    <div class="success-icon">‚úì</div>
    <div class="bold">Login Successful</div>
    <div class="muted" style="font-size:13px">Redirecting‚Ä¶</div>
  </div>

  <div id="loginBox" class="form" aria-live="polite">

    <!-- avatar -->
    <div class="avatar" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3 21c0-3 4-5 9-5s9 2 9 5" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>

    <!-- EMAIL FIELD -->
    <div class="field">
      <div class="label">
        <span>Email</span>
        <span class="muted" style="font-size:12px">use your account</span>
      </div>
      <div class="input" title="Email input">
        <input id="loginEmail" type="email" placeholder="you@domain.com" autocomplete="email" />
      </div>
    </div>

    <!-- PASSWORD FIELD WITH SMALL EYE -->
    <div class="field">
      <div class="label">
        <span>Password</span>
        <span class="muted" style="font-size:12px">keep it private</span>
      </div>

      <div class="password-wrapper">
        <div class="input" title="Password input">
          <input id="loginPassword" type="password" placeholder="Enter your password" autocomplete="current-password" />
          <!-- spacer so text doesn't go under the eye -->
          <div class="eye-spacer" aria-hidden="true"></div>
        </div>

        <!-- Small eye button; only this area is clickable -->
        <button class="eye-btn" aria-label="Toggle password visibility" onclick="togglePassword('loginPassword')">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.4"/>
          </svg>
        </button>
      </div>

      <!-- Inline message area (errors/info shown here) -->
      <div id="errorMessage" class="error-message" aria-live="polite" role="status"></div>
      <div id="infoMessage" class="info-message" aria-live="polite" role="status"></div>
    </div>

    <!-- ACTIONS -->
    <div class="actions">
      <button class="btn primary" onclick="login()" aria-label="Login button">Login</button>
      <div class="row">
        <div class="small-link" onclick="forgotPassword()">Forgot Password?</div>
        <div class="small-link" onclick="goRegister()">Create new account</div>
      </div>
    </div>

    <div class="sep" aria-hidden="true"></div>

    <div class="footer">
      By logging in you agree to our Terms & Privacy.
    </div>

  </div> <!-- end loginBox -->

</div> <!-- end container -->

<!-- ===========================
   FIREBASE LOGIC (UNCHANGED CORE)
   - Error handling adjusted to show inline messages only
   - No alert() usage
   - No "firebase" word shown to user
   =========================== -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { 
        getAuth,
        onAuthStateChanged,
        sendPasswordResetEmail,
        signInWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCfLFgbq7m-pEK-jw-PQvwGh4zlyGE8n4w",
        authDomain: "nasir-48572.firebaseapp.com",
        projectId: "nasir-48572",
        storageBucket: "nasir-48572.appspot.com",
        messagingSenderId: "1032758456576",
        appId: "1:1032758456576:web:eaea202eb1f313efc743e5"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Auto login (Remember me)
    onAuthStateChanged(auth, (user) => {
        if (user) window.location.href = "https://nasir-hacker-database.vercel.app";
    });

    // Toggle password visibility (small clickable eye only)
    window.togglePassword = function(id) {
        const f = document.getElementById(id);
        if (!f) return;
        f.type = f.type === "password" ? "text" : "password";
        // update aria-label of button if needed (optional)
    }

    window.goRegister = function () {
        window.location.href = "register.html";
    }

    // Utility to show inline messages (error or info)
    function clearMessages() {
      const err = document.getElementById("errorMessage");
      const info = document.getElementById("infoMessage");
      if (err) { err.classList.remove("show"); err.innerText = ""; }
      if (info) { info.classList.remove("show"); info.innerText = ""; }
    }

    function showError(text) {
      const err = document.getElementById("errorMessage");
      const info = document.getElementById("infoMessage");
      if (info) { info.classList.remove("show"); info.innerText = ""; }
      if (err) { err.innerText = text; err.classList.add("show"); }
    }

    function showInfo(text) {
      const err = document.getElementById("errorMessage");
      const info = document.getElementById("infoMessage");
      if (err) { err.classList.remove("show"); err.innerText = ""; }
      if (info) { info.innerText = text; info.classList.add("show"); }
    }

    window.forgotPassword = async function () {
        clearMessages();
        const email = prompt("Enter your email:");
        if (!email) {
          // user cancelled prompt or left blank - show inline message
          showError("Please enter your email to reset password");
          return;
        }

        try {
          await sendPasswordResetEmail(auth, email);
          // show inline info (no alerts)
          showInfo("Password reset link sent to your email");
        } catch (err) {
          // Map errors to friendly messages (no raw system text, no 'firebase' word)
          let msg = "Unable to send reset link";
          if (err && err.code) {
            switch (err.code) {
              case "auth/user-not-found":
                msg = "Email not found";
                break;
              case "auth/invalid-email":
                msg = "Invalid email address";
                break;
              case "auth/too-many-requests":
                msg = "Too many attempts. Try again later";
                break;
              default:
                msg = "Unable to send reset link. Try again later";
            }
          }
          showError(msg);
        }
    }

    window.login = function () {
        clearMessages();
        const email = document.getElementById("loginEmail").value.trim();
        const password = document.getElementById("loginPassword").value.trim();

        // Basic client-side validations
        if (!email) {
          showError("Please enter your email");
          return;
        }
        if (!password) {
          showError("Please enter your password");
          return;
        }

        signInWithEmailAndPassword(auth, email, password)
            .then(() => {
                // show success overlay (keeps existing behavior)
                document.getElementById("successBox").style.display = "flex";
                setTimeout(() => {
                    window.location.href = "https://nasir-hacker-database.vercel.app";
                }, 1200);
            })
            .catch((error) => {
                // Clean user-facing error messages, do NOT display raw system error or word "firebase"
                let msg = "Unable to login. Check your credentials";

                if (error && error.code) {
                    switch (error.code) {
                        case "auth/user-not-found":
                            msg = "Email not found";
                            break;
                        case "auth/wrong-password":
                            msg = "Invalid password";
                            break;
                        case "auth/invalid-email":
                            msg = "Invalid email address";
                            break;
                        case "auth/too-many-requests":
                            msg = "Too many attempts. Try again later";
                            break;
                        default:
                            msg = "Unable to login. Check your credentials";
                    }
                }

                showError(msg);
            });
    }
</script>

</body>
</html>
